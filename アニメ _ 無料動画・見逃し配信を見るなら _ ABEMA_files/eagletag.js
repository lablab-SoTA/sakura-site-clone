!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){(function(t,n){var r=/^\[object .+?Constructor\]$/,i=/^(?:0|[1-9]\d*)$/,o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var a="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,s=a||c||Function("return this")(),u=e&&!e.nodeType&&e,l=u&&"object"==typeof n&&n&&!n.nodeType&&n,d=l&&l.exports===u,f=d&&a.process,_=function(){try{var t=l&&l.require&&l.require("util").types;return t||f&&f.binding&&f.binding("util")}catch(t){}}(),h=_&&_.isTypedArray;function p(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var E,g,v,T=Array.prototype,m=Function.prototype,y=Object.prototype,O=s["__core-js_shared__"],R=m.toString,A=y.hasOwnProperty,I=(E=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",b=y.toString,C=R.call(Object),S=RegExp("^"+R.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=d?s.Buffer:void 0,G=s.Symbol,N=s.Uint8Array,L=w?w.allocUnsafe:void 0,M=(g=Object.getPrototypeOf,v=Object,function(t){return g(v(t))}),D=Object.create,k=y.propertyIsEnumerable,x=T.splice,P=G?G.toStringTag:void 0,F=function(){try{var t=ut(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),K=w?w.isBuffer:void 0,U=Math.max,j=Date.now,V=ut(s,"Map"),B=ut(Object,"create"),H=function(){function t(){}return function(e){if(!yt(e))return{};if(D)return D(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function W(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function q(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Y(t){var e=this.__data__=new W(t);this.size=e.size}function J(t,e){var n=Et(t),r=!n&&pt(t),i=!n&&!r&&vt(t),o=!n&&!r&&!i&&Rt(t),a=n||r||i||o,c=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],s=c.length;for(var u in t)!e&&!A.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||lt(u,s))||c.push(u);return c}function $(t,e,n){(void 0===n||ht(t[e],n))&&(void 0!==n||e in t)||Z(t,e,n)}function X(t,e,n){var r=t[e];A.call(t,e)&&ht(r,n)&&(void 0!==n||e in t)||Z(t,e,n)}function Q(t,e){for(var n=t.length;n--;)if(ht(t[n][0],e))return n;return-1}function Z(t,e,n){"__proto__"==e&&F?F(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}z.prototype.clear=function(){this.__data__=B?B(null):{},this.size=0},z.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},z.prototype.get=function(t){var e=this.__data__;if(B){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return A.call(e,t)?e[t]:void 0},z.prototype.has=function(t){var e=this.__data__;return B?void 0!==e[t]:A.call(e,t)},z.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=B&&void 0===e?"__lodash_hash_undefined__":e,this},W.prototype.clear=function(){this.__data__=[],this.size=0},W.prototype.delete=function(t){var e=this.__data__,n=Q(e,t);return!(n<0)&&(n==e.length-1?e.pop():x.call(e,n,1),--this.size,!0)},W.prototype.get=function(t){var e=this.__data__,n=Q(e,t);return n<0?void 0:e[n][1]},W.prototype.has=function(t){return Q(this.__data__,t)>-1},W.prototype.set=function(t,e){var n=this.__data__,r=Q(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},q.prototype.clear=function(){this.size=0,this.__data__={hash:new z,map:new(V||W),string:new z}},q.prototype.delete=function(t){var e=st(this,t).delete(t);return this.size-=e?1:0,e},q.prototype.get=function(t){return st(this,t).get(t)},q.prototype.has=function(t){return st(this,t).has(t)},q.prototype.set=function(t,e){var n=st(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Y.prototype.clear=function(){this.__data__=new W,this.size=0},Y.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Y.prototype.get=function(t){return this.__data__.get(t)},Y.prototype.has=function(t){return this.__data__.has(t)},Y.prototype.set=function(t,e){var n=this.__data__;if(n instanceof W){var r=n.__data__;if(!V||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new q(r)}return n.set(t,e),this.size=n.size,this};var tt,et=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var c=o[tt?a:++r];if(!1===e(i[c],c,i))break}return t};function nt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":P&&P in Object(t)?function(t){var e=A.call(t,P),n=t[P];try{t[P]=void 0;var r=!0}catch(t){}var i=b.call(t);r&&(e?t[P]=n:delete t[P]);return i}(t):function(t){return b.call(t)}(t)}function rt(t){return Ot(t)&&"[object Arguments]"==nt(t)}function it(t){return!(!yt(t)||function(t){return!!I&&I in t}(t))&&(Tt(t)?S:r).test(function(t){if(null!=t){try{return R.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function ot(t){if(!yt(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=dt(t),n=[];for(var r in t)("constructor"!=r||!e&&A.call(t,r))&&n.push(r);return n}function at(t,e,n,r,i){t!==e&&et(e,(function(o,a){if(i||(i=new Y),yt(o))!function(t,e,n,r,i,o,a){var c=ft(t,n),s=ft(e,n),u=a.get(s);if(u)return void $(t,n,u);var l=o?o(c,s,n+"",t,e,a):void 0,d=void 0===l;if(d){var f=Et(s),_=!f&&vt(s),h=!f&&!_&&Rt(s);l=s,f||_||h?Et(c)?l=c:Ot(T=c)&&gt(T)?l=function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(c):_?(d=!1,l=function(t,e){if(e)return t.slice();var n=t.length,r=L?L(n):new t.constructor(n);return t.copy(r),r}(s,!0)):h?(d=!1,p=s,E=!0?(g=p.buffer,v=new g.constructor(g.byteLength),new N(v).set(new N(g)),v):p.buffer,l=new p.constructor(E,p.byteOffset,p.length)):l=[]:function(t){if(!Ot(t)||"[object Object]"!=nt(t))return!1;var e=M(t);if(null===e)return!0;var n=A.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&R.call(n)==C}(s)||pt(s)?(l=c,pt(c)?l=function(t){return function(t,e,n,r){var i=!n;n||(n={});var o=-1,a=e.length;for(;++o<a;){var c=e[o],s=r?r(n[c],t[c],c,n,t):void 0;void 0===s&&(s=t[c]),i?Z(n,c,s):X(n,c,s)}return n}(t,At(t))}(c):yt(c)&&!Tt(c)||(l=function(t){return"function"!=typeof t.constructor||dt(t)?{}:H(M(t))}(s))):d=!1}var p,E,g,v;var T;d&&(a.set(s,l),i(l,s,r,o,a),a.delete(s));$(t,n,l)}(t,e,a,n,at,r,i);else{var c=r?r(ft(t,a),o,a+"",t,e,i):void 0;void 0===c&&(c=o),$(t,a,c)}}),At)}function ct(t,e){return _t(function(t,e,n){return e=U(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=U(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var c=Array(e+1);++i<e;)c[i]=r[i];return c[e]=n(a),p(t,this,c)}}(t,e,Ct),t+"")}function st(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function ut(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return it(n)?n:void 0}function lt(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}function dt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||y)}function ft(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var _t=function(t){var e=0,n=0;return function(){var r=j(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(F?function(t,e){return F(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Ct);function ht(t,e){return t===e||t!=t&&e!=e}var pt=rt(function(){return arguments}())?rt:function(t){return Ot(t)&&A.call(t,"callee")&&!k.call(t,"callee")},Et=Array.isArray;function gt(t){return null!=t&&mt(t.length)&&!Tt(t)}var vt=K||function(){return!1};function Tt(t){if(!yt(t))return!1;var e=nt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function mt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function yt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ot(t){return null!=t&&"object"==typeof t}var Rt=h?function(t){return function(e){return t(e)}}(h):function(t){return Ot(t)&&mt(t.length)&&!!o[nt(t)]};function At(t){return gt(t)?J(t,!0):ot(t)}var It,bt=(It=function(t,e,n){at(t,e,n)},ct((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=It.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,e,n){if(!yt(n))return!1;var r=typeof e;return!!("number"==r?gt(n)&&lt(e,n.length):"string"==r&&e in n)&&ht(n[e],t)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&It(t,a,n,i)}return t})));function Ct(t){return t}n.exports=bt}).call(this,n(3),n(4)(t))},function(t,e){var n=/^(?:0|[1-9]\d*)$/;function r(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var i,o,a=Object.prototype,c=a.hasOwnProperty,s=a.toString,u=a.propertyIsEnumerable,l=(i=Object.keys,o=Object,function(t){return i(o(t))}),d=Math.max,f=!u.call({valueOf:1},"valueOf");function _(t,e){var n=v(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&T(t)}(t)&&c.call(t,"callee")&&(!u.call(t,"callee")||"[object Arguments]"==s.call(t))}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!c.call(t,o)||i&&("length"==o||p(o,r))||n.push(o);return n}function h(t,e,n){var r=t[e];c.call(t,e)&&g(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function p(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<e}function E(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||a)}function g(t,e){return t===e||t!=t&&e!=e}var v=Array.isArray;function T(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!function(t){var e=m(t)?s.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)}function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var y,O=(y=function(t,e){if(f||E(e)||T(e))!function(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],c=r?r(n[a],t[a],a,n,t):void 0;h(n,a,void 0===c?t[a]:c)}}(e,function(t){return T(t)?_(t):function(t){if(!E(t))return l(t);var e=[];for(var n in Object(t))c.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}(e),t);else for(var n in e)c.call(e,n)&&h(t,n,e[n])},function(t,e){return e=d(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=d(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var c=Array(e+1);++i<e;)c[i]=n[i];return c[e]=a,r(t,this,c)}}((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=y.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,e,n){if(!m(n))return!1;var r=typeof e;return!!("number"==r?T(n)&&p(e,n.length):"string"==r&&e in n)&&g(n[e],t)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&y(t,a,n,i)}return t})));t.exports=O},function(t,e){t.exports={environment:"production",protocol:"https",tracker:{domain:"e.eagle-insight.com",eventPath:"/event",cookiePath:"/cw",trackParamFetchPath:"/ftc"}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n.r(e);const r=n(2);class i{static get DATADOG_TOKEN(){return"pub25e81124c485c8c41d251d44e9148b27"}static get ENVIRONMENT(){return r.environment}static get PROTOCOL(){return r.protocol}static get TRACKER_DOMAIN(){return r.tracker.domain}static get TRACKER_EVENT_PATH(){return r.tracker.eventPath}static get TRACKER_COOKIE_PATH(){return r.tracker.cookiePath}static get TRACK_PARAM_FETCH_PATH(){return r.tracker.trackParamFetchPath}}const o={view_item:"view_item",add_to_cart:"add_to_cart",purchase:"purchase",registration:"registration"};class a{static EVENT_NAME_VIEW_ITEM(){return"view_item"}static EVENT_NAME_ADD_TO_CART(){return"add_to_cart"}static EVENT_NAME_PURCHASE(){return"purchase"}static EVENT_NAME_REGISTRATION(){return"registration"}static CLEANED_STRING_NUMBER(t){return t.replace(/,/g,"")}static CONVERT_TO_FLOAT(t){const e=this.CLEANED_STRING_NUMBER(t),n=parseFloat(e);return e!==n.toString()&&console.log("mercari ads tag warning : contains invalid string"),n}static CONVERT_TO_INT(t){const e=this.CLEANED_STRING_NUMBER(t),n=parseInt(e);return e!==n.toString()&&console.log("mercari ads tag warning : contains invalid string"),n}static EVENTIFY(t,e,n){const r=t.push;t.push=function(){const i=[].slice.call(arguments,0),o=r.apply(t,i);try{e(t)}catch(t){n.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"eventify callback"})}return o}}static LAYER_EVENTIFY(t,e,n){const r=t.push;t.push=function(){const i=[].slice.call(arguments,0),o=r.apply(t,i);try{e(i[0])}catch(t){n.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"layber_eventify callback"})}return o}}static CONVERT_TRACK_PARAM_TO_EVENT(t,e,n){const r={eventType:void 0,adAccountId:void 0,items:void 0,purchase:void 0};switch(e=e||{},r.eventType=o[t],r.adAccountId=n,t){case this.EVENT_NAME_VIEW_ITEM():case this.EVENT_NAME_ADD_TO_CART():const n=this.convert_items_param(e.items);if(!this.VALIDATE_ITEMS_DATA(n))return void console.log("mercari ads tag : event data validation error");r.items=n;break;case this.EVENT_NAME_PURCHASE():case this.EVENT_NAME_REGISTRATION():const i=this.convert_purchase_param(e);if(!this.VALIDATE_PURCHASE_DATA(i))return void console.log("mercari ads tag : event data validation error");r.purchase=i;break;default:r.eventType=t}return r}static convert_purchase_param(t){const e=this.convert_items_param(t.items),n=t.value,r=t.discountAmount;return{transactionId:t.transactionId,value:"string"==typeof n?this.CONVERT_TO_FLOAT(n):n,currency:t.currency,discountAmount:"string"==typeof r?this.CONVERT_TO_FLOAT(r):r,items:e}}static convert_items_param(t){if(void 0!==t)return t.map(t=>{const e="string"==typeof t.price?this.CONVERT_TO_FLOAT(t.price):t.price,n="string"==typeof t.quantity?this.CONVERT_TO_INT(t.quantity):t.quantity,r="string"==typeof t.discount?this.CONVERT_TO_FLOAT(t.discount):t.discount;return{id:t.id,name:t.name,price:e,quantity:n,discount:r}})}static VALIDATE_ITEMS_DATA(t){return void 0===t||this.VALIDATE_ITEMS_DATA_FOR_EC(t)}static VALIDATE_PURCHASE_DATA(t){if(void 0!==t){if("object"!=typeof t)return!1;if(void 0!==t.transactionId&&"string"!=typeof t.transactionId)return!1;if(void 0!==t.value&&"number"!=typeof t.value||Number.isNaN(t.value))return!1;if(void 0!==t.currency&&"string"!=typeof t.currency)return!1;if(void 0!==t.discountAmount&&"number"!=typeof t.discountAmount||Number.isNaN(t.discountAmount))return!1;if(void 0!==t.items)return this.validate_purchase_items_data_for_ec(t.items)}return!0}static VALIDATE_ITEMS_DATA_FOR_EC(t){if("object"!=typeof t)return!1;for(let e=0;e<t.length;e++){const n=t[e];if(void 0!==n.id&&"string"!=typeof n.id)return!1;if(void 0!==n.name&&"string"!=typeof n.name)return!1;if(!n.id&&!n.name)return!1;if(void 0!==n.price&&"number"!=typeof n.price||Number.isNaN(n.price))return!1;if(void 0!==n.quantity&&"number"!=typeof n.quantity||Number.isNaN(n.quantity))return!1}return!0}static VALIDATE_PURCHASE_DATA_FOR_EC(t){return"object"==typeof t&&("string"==typeof t.transactionId&&("number"==typeof t.value&&!Number.isNaN(t.value)&&((void 0===t.currency||"string"==typeof t.currency)&&(!(void 0!==t.discountAmount&&"number"!=typeof t.discountAmount||Number.isNaN(t.discountAmount))&&this.validate_purchase_items_data_for_ec(t.items)))))}static validate_purchase_items_data_for_ec(t){if("object"!=typeof t)return!1;for(let e=0;e<t.length;e++){const n=t[e];if("string"!=typeof n.id)return!1;if(void 0!==n.name&&"string"!=typeof n.name)return!1;if("number"!=typeof n.price||Number.isNaN(n.price))return!1;if("number"!=typeof n.quantity||Number.isNaN(n.quantity))return!1;if(void 0!==n.discount&&"number"!=typeof n.discount||Number.isNaN(n.discount))return!1}return!0}static GET_TRACKING_FROM_QUERY_PARAM(){const t=new URL(document.location);if(!t.searchParams.has("_egl-prm"))return[!1,{}];const e=t.searchParams.get("_egl-prm");try{const t=JSON.parse(e);return[!0,{tid:t["_egl-tid"],triggerEventId:t["_egl-uid"],auctionId:t["_egl-aucid"],adId:t["_egl-adid"]}]}catch{}return[!1,{}]}static WRITE_COOKIE(t,e,n){if(void 0===t||""===t||void 0===e)return;const r=n||window.location.host;document.cookie=e+"="+t+"; domain="+r+"; path=/; max-age=94608000"}static WRITE_COOKIE_FROM_QUERY_PARAM(t,e){this.WRITE_COOKIE(e.tid,"_egl-tid",t),this.WRITE_COOKIE(e.triggerEventId,"_egl-uid",t),this.WRITE_COOKIE(e.auctionId,"_egl-aucid",t),this.WRITE_COOKIE(e.adId,"_egl-adid",t)}static WRITE_COOKIE_FROM_GENERATED_UUID(t,e){this.WRITE_COOKIE(e,"_egl-uuid",t)}static WRITE_LOCAL_STORAGE(t,e){"undefined"!=typeof localStorage&&void 0!==e&&""!==e&&void 0!==t&&localStorage.setItem(t,e)}static WRITE_LOCAL_STORAGE_FROM_QUERY_PARAM(t){this.WRITE_LOCAL_STORAGE("_egl-tid",t.tid),this.WRITE_LOCAL_STORAGE("_egl-uid",t.triggerEventId),this.WRITE_LOCAL_STORAGE("_egl-aucid",t.auctionId),this.WRITE_LOCAL_STORAGE("_egl-adid",t.adId)}static WRITE_LOCAL_STORAGE_FROM_GENERATED_UUID(t){this.WRITE_LOCAL_STORAGE("_egl-uuid",t)}static WRITE_TRACKING_PARAMETERS(t,e){this.WRITE_COOKIE_FROM_QUERY_PARAM(t,e),this.WRITE_LOCAL_STORAGE_FROM_QUERY_PARAM(e)}static CHECK_AND_WRITE_TRACKING_PARAMETERS(t,e){let n=!1;const r=this.GET_TRACKING_ID();e.tid===r&&(e.tid=void 0);const i=this.GET_AUCTION_ID();e.auctionId===i?e.auctionId=void 0:void 0!==e.auctionId&&""!==e.auctionId&&(n=!0);const o=this.GET_AD_ID();e.adId===o?e.adId=void 0:void 0!==e.adId&&""!==e.adId&&(n=!0);const a=this.GET_TRIGGER_EVENT_ID();return e.triggerEventId===a?e.triggerEventId=void 0:void 0!==e.triggerEventId&&""!==e.triggerEventId&&(n=!0),this.WRITE_TRACKING_PARAMETERS(t,e),n}static WRITE_TRACKING_UUID(t,e){this.WRITE_COOKIE_FROM_GENERATED_UUID(t,e),this.WRITE_LOCAL_STORAGE_FROM_GENERATED_UUID(e)}static DELETE_TRACKING_FROM_COOKIE(t,e){const n=e||window.location.host;document.cookie=t+"=; domain="+n+"; path=/; max-age=0"}static DELETE_TRACKING_ID_FROM_COOKIE(t){this.DELETE_TRACKING_FROM_COOKIE("_egl-tid",t)}static DELETE_TRACKING_FROM_LOCAL_STORAGE(t){"undefined"!=typeof localStorage&&localStorage.removeItem(t)}static DELETE_TRACKING_ID_FROM_LOCAL_STORAGE(){this.DELETE_TRACKING_FROM_LOCAL_STORAGE("_egl-tid")}static DELETE_TRACKING_ID(t){this.DELETE_TRACKING_ID_FROM_COOKIE(t),this.DELETE_TRACKING_ID_FROM_LOCAL_STORAGE()}static GET_TRACKING_FROM_COOKIE(t){let e=document.cookie.split(";").map(t=>t.trim()).find(e=>{const n=e.split("=");return n[0]===t&&""!==n[1]});if(void 0===e)return;const n=e.split("=")[1];return""!==n&&"null"!==n?n:void 0}static GET_TRACKING_ID_FROM_COOKIE(){return this.GET_TRACKING_FROM_COOKIE("_egl-tid")}static GET_TRIGGER_EVENT_ID_FROM_COOKIE(){return this.GET_TRACKING_FROM_COOKIE("_egl-uid")}static GET_AUCTION_ID_FROM_COOKIE(){return this.GET_TRACKING_FROM_COOKIE("_egl-aucid")}static GET_AD_ID_FROM_COOKIE(){return this.GET_TRACKING_FROM_COOKIE("_egl-adid")}static GET_TRACKING_UUID_FROM_COOKIE(){return this.GET_TRACKING_FROM_COOKIE("_egl-uuid")}static GET_TRACKING_FROM_LOCAL_STORAGE(t){if("undefined"==typeof localStorage)return;return localStorage.getItem(t)||void 0}static GET_TRACKING_ID_FROM_LOCAL_STORAGE(){return this.GET_TRACKING_FROM_LOCAL_STORAGE("_egl-tid")}static GET_TRIGGER_EVENT_ID_FROM_LOCAL_STORAGE(){return this.GET_TRACKING_FROM_LOCAL_STORAGE("_egl-uid")}static GET_AUCTION_ID_FROM_LOCAL_STORAGE(){return this.GET_TRACKING_FROM_LOCAL_STORAGE("_egl-aucid")}static GET_AD_ID_FROM_LOCAL_STORAGE(){return this.GET_TRACKING_FROM_LOCAL_STORAGE("_egl-adid")}static GET_TRACKING_UUID_FROM_LOCAL_STORAGE(){return this.GET_TRACKING_FROM_LOCAL_STORAGE("_egl-uuid")}static GET_TRACKING_ID(){return this.GET_TRACKING_ID_FROM_COOKIE()||this.GET_TRACKING_ID_FROM_LOCAL_STORAGE()}static GET_TRIGGER_EVENT_ID(){return this.GET_TRIGGER_EVENT_ID_FROM_COOKIE()||this.GET_TRIGGER_EVENT_ID_FROM_LOCAL_STORAGE()}static GET_AUCTION_ID(){return this.GET_AUCTION_ID_FROM_COOKIE()||this.GET_AUCTION_ID_FROM_LOCAL_STORAGE()}static GET_AD_ID(){return this.GET_AD_ID_FROM_COOKIE()||this.GET_AD_ID_FROM_LOCAL_STORAGE()}static GET_TRACKING_UUID(){return this.GET_TRACKING_UUID_FROM_COOKIE()||this.GET_TRACKING_UUID_FROM_LOCAL_STORAGE()}static IS_ARGUMENTS_OBJECT(t){return"[object Arguments]"===Object.prototype.toString.call(t)}static CONVERT_OBJECT_TO_ARRAY(t){return Object.keys(t)}static IS_OBJECT_PROPERTY_MEMBER_EXISTS(t){return this.CONVERT_OBJECT_TO_ARRAY(t).length>0}static APPEND_BEACON_IMG_TAG(t,e){let n=document.createElement("img");const r=e?document.getElementById(e):document.body;n.src=t,n.width=1,n.height=1,n.alt="",n.style.display="none",r.appendChild(n)}static EXISTS_TRACKING_UUID(){return{firstPartyCookie:!!this.GET_TRACKING_UUID_FROM_COOKIE(),firstPartyLocalStorage:!!this.GET_TRACKING_UUID_FROM_LOCAL_STORAGE()}}static EXISTS_TRACKING_PARAMETERS(){return{trackingUuid:void 0,trackingId:{firstPartyCookie:!!this.GET_TRACKING_ID_FROM_COOKIE(),firstPartyLocalStorage:!!this.GET_TRACKING_ID_FROM_LOCAL_STORAGE()},auctionId:{firstPartyCookie:!!this.GET_AUCTION_ID_FROM_COOKIE(),firstPartyLocalStorage:!!this.GET_AUCTION_ID_FROM_LOCAL_STORAGE()},triggerEventId:{firstPartyCookie:!!this.GET_TRIGGER_EVENT_ID_FROM_COOKIE(),firstPartyLocalStorage:!!this.GET_TRIGGER_EVENT_ID_FROM_LOCAL_STORAGE()},adId:{firstPartyCookie:!!this.GET_AD_ID_FROM_COOKIE(),firstPartyLocalStorage:!!this.GET_AD_ID_FROM_LOCAL_STORAGE()}}}static GET_VISIT_PAGE_HISTORY(){const t=this.GET_TRACKING_FROM_COOKIE("_egl-vph")||this.GET_TRACKING_FROM_LOCAL_STORAGE("_egl-vph");if(!t)return{};try{return JSON.parse(t)}catch(t){return{}}}static SET_VISIT_PAGE_HISTORY(t,e){const n=JSON.stringify(t);this.WRITE_COOKIE(n,"_egl-vph",e),this.WRITE_LOCAL_STORAGE("_egl-vph",n)}static SHOULD_SEND_VISIT_PAGE_EVENT(t){const e=this.GET_VISIT_PAGE_HISTORY(),n=Date.now();for(const r of t){const t=e[r];if(!t||n-t>=6048e5)return!0}return!1}static RECORD_VISIT_PAGE_EVENT_SENT(t,e){const n=this.GET_VISIT_PAGE_HISTORY(),r=Date.now();for(const e of t)n[e]=r;this.SET_VISIT_PAGE_HISTORY(n,e)}}function c(t){const e=l(t);return a.VALIDATE_ITEMS_DATA_FOR_EC(e)?[a.EVENT_NAME_VIEW_ITEM(),{items:e}]:(console.log("mercari ads tag : event data validation error"),[void 0,void 0])}function s(t){const e=l(t);return a.VALIDATE_ITEMS_DATA_FOR_EC(e)?[a.EVENT_NAME_ADD_TO_CART(),{items:e}]:(console.log("mercari ads tag : event data validation error"),[void 0,void 0])}function u(t){const e=l(t),n=t.ecommerce.value,r=t.ecommerce.discountAmount,i={transactionId:t.ecommerce.transaction_id,value:"string"==typeof n?parseFloat(n):n,currency:t.ecommerce.currency,discountAmount:"string"==typeof r?parseFloat(r):r,items:e};return a.VALIDATE_PURCHASE_DATA_FOR_EC(i)?[a.EVENT_NAME_PURCHASE(),i]:(console.log("mercari ads tag : event data validation error"),[void 0,void 0])}function l(t){if(void 0!==t.ecommerce.items)return t.ecommerce.items.map(t=>{const e="string"==typeof t.price?parseFloat(t.price):t.price,n="string"==typeof t.quantity?parseInt(t.quantity):t.quantity,r="string"==typeof t.discount?parseFloat(t.discount):t.discount;return{id:t.item_id,name:t.item_name,price:e,quantity:n,discount:r}})}class d{constructor(){this.dataLayer=window.dataLayer||[],this.eventTypes={view_item:c,add_to_cart:s,purchase:u}}init(t,e){a.LAYER_EVENTIFY(this.dataLayer,t,e)}findEvent(){return this.dataLayer.filter(t=>void 0!==(t=this.processArgumentObject(t)).event&&this.eventTypes[t.event]&&void 0!==t.ecommerce).map(t=>this.trackEvent(t))}trackEvent(t){if(void 0===(t=this.processArgumentObject(t))||void 0===t.event||void 0===t.ecommerce)return[void 0,void 0];const e=this.eventTypes[t.event];return e?e(t):[void 0,void 0]}processArgumentObject(t){return a.IS_ARGUMENTS_OBJECT(t)&&t.length>0?t[0]:t}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var f=function(){return(f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var _=function(){return(_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function h(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function c(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,c)}s((r=r.apply(t,e||[])).next())}))}function p(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function E(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,i++)r[i]=o[a];return r}var g,v,T;function m(t){return t?(parseInt(t,10)^16*Math.random()>>parseInt(t,10)/4).toString(16):(1e7+"-1000-4000-8000-100000000000").replace(/[018]/g,m)}function y(){}function O(t,e,n){if(null==t)return JSON.stringify(t);var r=[!1,void 0];R(t)&&(r=[!0,t.toJSON],delete t.toJSON);var i,o,a=[!1,void 0];"object"==typeof t&&R(i=Object.getPrototypeOf(t))&&(a=[!0,i.toJSON],delete i.toJSON);try{o=JSON.stringify(t,void 0,n)}catch(t){o="<error: unable to serialize object>"}finally{r[0]&&(t.toJSON=r[1]),a[0]&&(i.toJSON=a[1])}return o}function R(t){return"object"==typeof t&&null!==t&&t.hasOwnProperty("toJSON")}function A(){return void 0===T&&(T=performance.timing.navigationStart),T}function I(t){if(t.origin)return t.origin;var e=t.host.replace(/(:80|:443)$/,"");return t.protocol+"//"+e}!function(t){t.BEFORE_UNLOAD="beforeunload",t.CLICK="click",t.KEY_DOWN="keydown",t.LOAD="load",t.POP_STATE="popstate",t.SCROLL="scroll",t.TOUCH_START="touchstart",t.VISIBILITY_CHANGE="visibilitychange"}(g||(g={})),function(t){t.DOCUMENT="document",t.XHR="xhr",t.BEACON="beacon",t.FETCH="fetch",t.CSS="css",t.JS="js",t.IMAGE="image",t.FONT="font",t.MEDIA="media",t.OTHER="other"}(v||(v={}));var b={isCollectingError:!0,maxErrorsByMinute:3e3,maxInternalMonitoringMessagesPerPage:15,resourceSampleRate:100,sampleRate:100,silentMultipleInit:!1,requestErrorResponseLengthLimit:32768,flushTimeout:3e4,maxBatchSize:50,maxMessageSize:262144,batchBytesLimit:16384};function C(t,e,n){var r="us"===e.datacenter?"com":"eu",i="production"===e.sdkEnv?"datadoghq."+r:"datad0g."+r,o="sdk_version:"+e.sdkVersion+(e.env?",env:"+e.env:"")+(e.service?",service:"+e.service:"")+(e.version?",version:"+e.version:""),a=t+"-http-intake.logs."+i,c=e.proxyHost?e.proxyHost:a,s=e.proxyHost?"ddhost="+a+"&":"";return"https://"+c+"/v1/input/"+e.clientToken+"?"+s+"ddsource="+(n||"browser")+"&ddtags="+o}var S=n(1),w=n.n(S),G=n(0),N=n.n(G),L=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var D=function(){var t,e,n,r,i,o,a=[];function c(t,e,n){var r;for(var i in a)if(M(a,i))try{a[i](t,e,n)}catch(t){r=t}if(r)throw r}function s(t,r,i,o,a){if(e)k.augmentStackTraceWithInitialElement(e,r,i,""+t),l();else if(a)c(k(a),!0,a);else{var s,u={url:r,column:o,line:i},d=t;if("[object String]"==={}.toString.call(t)){var f=d.match(L);f&&(s=f[1],d=f[2])}c({name:s,message:d,stack:[u]},!0)}return!!n&&n.apply(this,arguments)}function u(t){var e=t.reason||"Empty reason";c(k(e),!0,e)}function l(){var n=e,r=t;e=void 0,t=void 0,c(n,!1,r)}function d(n){if(e){if(t===n)return;l()}var r=k(n);throw e=r,t=n,setTimeout((function(){t===n&&l()}),r.incomplete?2e3:0),n}return d.subscribe=function(t){!function(){if(r)return;n=window.onerror,window.onerror=V(s),r=!0}(),function(){if(o)return;i=null!==window.onunhandledrejection?window.onunhandledrejection:void 0,window.onunhandledrejection=V(u),o=!0}(),a.push(t)},d.unsubscribe=function(t){for(var e=a.length-1;e>=0;e-=1)a[e]===t&&a.splice(e,1);0===a.length&&(r&&(window.onerror=n,r=!1),o&&(window.onunhandledrejection=i,o=!1))},d.traceKitWindowOnError=s,d}(),k=function(){function t(t){if(t.stack){for(var e,n,r,i,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,c=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,s=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=/\((\S*)(?::(\d+))(?::(\d+))\)/,l=t.stack.split("\n"),d=[],f=0,_=l.length;f<_;f+=1){if(o.exec(l[f])){var h=(r=o.exec(l[f]))[2]&&0===r[2].indexOf("native");e=r[2]&&0===r[2].indexOf("eval"),n=u.exec(r[2]),e&&n&&(r[2]=n[1],r[3]=n[2],r[4]=n[3]),i={args:h?[r[2]]:[],column:r[4]?+r[4]:void 0,func:r[1]||"?",line:r[3]?+r[3]:void 0,url:h?void 0:r[2]}}else if(c.exec(l[f]))i={args:[],column:(r=c.exec(l[f]))[4]?+r[4]:void 0,func:r[1]||"?",line:+r[3],url:r[2]};else{if(!a.exec(l[f]))continue;e=(r=a.exec(l[f]))[3]&&r[3].indexOf(" > eval")>-1,n=s.exec(r[3]),e&&n?(r[3]=n[1],r[4]=n[2],r[5]=void 0):0!==f||r[5]||void 0===t.columnNumber||(d[0].column=t.columnNumber+1),i={args:r[2]?r[2].split(","):[],column:r[5]?+r[5]:void 0,func:r[1]||"?",line:r[4]?+r[4]:void 0,url:r[3]}}!i.func&&i.line&&(i.func="?"),d.push(i)}if(d.length)return{stack:d,message:t.message,name:t.name}}}function e(t,e,n,r){var i={url:e,line:n?+n:void 0};if(i.url&&i.line){t.incomplete=!1;var o=t.stack;if(o.length>0&&o[0].url===i.url){if(o[0].line===i.line)return!1;if(!o[0].line&&o[0].func===i.func)return o[0].line=i.line,o[0].context=i.context,!1}return o.unshift(i),t.partial=!0,!0}return t.incomplete=!0,!1}function n(t,r){for(var i,o,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,c=[],s={},u=!1,l=n.caller;l&&!u;l=l.caller)l!==k&&l!==D&&(o={args:[],column:void 0,func:"?",line:void 0,url:void 0},i=a.exec(l.toString()),l.name?o.func=l.name:i&&(o.func=i[1]),void 0===o.func&&(o.func=i?i.input.substring(0,i.input.indexOf("{")):void 0),s[""+l]?u=!0:s[""+l]=!0,c.push(o));r&&c.splice(0,r);var d={stack:c,message:t.message,name:t.name};return e(d,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),d}function r(e,r){var i,o=void 0===r?0:+r;try{if(i=function(t){var e=t.stacktrace;if(e){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=e.split("\n"),a=[],c=0;c<o.length;c+=2){var s=void 0;r.exec(o[c])?s={args:[],column:void 0,func:(n=r.exec(o[c]))[3],line:+n[1],url:n[2]}:i.exec(o[c])&&(s={args:(n=i.exec(o[c]))[5]?n[5].split(","):[],column:+n[2],func:n[3]||n[4],line:+n[1],url:n[6]}),s&&(!s.func&&s.line&&(s.func="?"),s.context=[o[c+1]],a.push(s))}if(a.length)return{stack:a,message:t.message,name:t.name}}}(e))return i}catch(t){0}try{if(i=t(e))return i}catch(t){0}try{if(i=function(t){var e=t.message.split("\n");if(!(e.length<4)){var n,r=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,i=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of function script\s*$/i,a=[],c=window&&window.document&&window.document.getElementsByTagName("script"),s=[];for(var u in c)M(c,u)&&!c[u].src&&s.push(c[u]);for(var l=2;l<e.length;l+=2){var d=void 0;if(r.exec(e[l]))d={args:[],column:void 0,func:(n=r.exec(e[l]))[3],line:+n[1],url:n[2]};else if(i.exec(e[l]))d={args:[],column:void 0,func:(n=i.exec(e[l]))[4],line:+n[1],url:n[3]};else if(o.exec(e[l])){n=o.exec(e[l]),d={url:window.location.href.replace(/#.*$/,""),args:[],column:void 0,func:"",line:+n[1]}}d&&(d.func||(d.func="?"),d.context=[e[l+1]],a.push(d))}if(a.length)return{stack:a,message:e[0],name:t.name}}}(e))return i}catch(t){0}try{if(i=n(e,o+1))return i}catch(t){0}return{message:e.message,name:e.name,stack:[]}}return r.augmentStackTraceWithInitialElement=e,r.computeStackTraceFromStackProp=t,r.ofCaller=function(t){var e=1+(void 0===t?0:+t);try{throw new Error}catch(t){return k(t,e+1)}},r}();var x=function(){function t(t,e,n){void 0===n&&(n=!1),this.endpointUrl=t,this.bytesLimit=e,this.withBatchTime=n}return t.prototype.send=function(t,e){var n=this.withBatchTime?function(t){return t+(-1===t.indexOf("?")?"?":"&")+"batch_time="+(new Date).getTime()}(this.endpointUrl):this.endpointUrl;if(navigator.sendBeacon&&e<this.bytesLimit&&navigator.sendBeacon(n,t))return;var r=new XMLHttpRequest;r.open("POST",n,!0),r.send(t)},t}();var P,F=function(){function t(t,e,n,r,i,o,a){void 0===a&&(a=y),this.request=t,this.maxSize=e,this.bytesLimit=n,this.maxMessageSize=r,this.flushTimeout=i,this.contextProvider=o,this.beforeUnloadCallback=a,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0,this.flushOnVisibilityHidden(),this.flushPeriodically()}return t.prototype.add=function(t){this.addOrUpdate(t)},t.prototype.upsert=function(t,e){this.addOrUpdate(t,e)},t.prototype.flush=function(){if(0!==this.bufferMessageCount){var t=E(this.pushOnlyBuffer,(e=this.upsertBuffer,n=[],Object.keys(e).forEach((function(t){n.push(e[t])})),n));this.request.send(t.join("\n"),this.bufferBytesSize),this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0}var e,n},t.prototype.addOrUpdate=function(t,e){var n=this.process(t),r=n.processedMessage,i=n.messageBytesSize;i>=this.maxMessageSize?console.warn("Discarded a message whose size was bigger than the maximum allowed size "+this.maxMessageSize+"KB."):(this.hasMessageFor(e)&&this.remove(e),this.willReachedBytesLimitWith(i)&&this.flush(),this.push(r,i,e),this.isFull()&&this.flush())},t.prototype.process=function(t){var e=O(N()({},this.contextProvider(),t));return{processedMessage:e,messageBytesSize:this.sizeInBytes(e)}},t.prototype.push=function(t,e,n){this.bufferMessageCount>0&&(this.bufferBytesSize+=1),void 0!==n?this.upsertBuffer[n]=t:this.pushOnlyBuffer.push(t),this.bufferBytesSize+=e,this.bufferMessageCount+=1},t.prototype.remove=function(t){var e=this.upsertBuffer[t];delete this.upsertBuffer[t];var n=this.sizeInBytes(e);this.bufferBytesSize-=n,this.bufferMessageCount-=1,this.bufferMessageCount>0&&(this.bufferBytesSize-=1)},t.prototype.hasMessageFor=function(t){return void 0!==t&&void 0!==this.upsertBuffer[t]},t.prototype.willReachedBytesLimitWith=function(t){return this.bufferBytesSize+t+1>=this.bytesLimit},t.prototype.isFull=function(){return this.bufferMessageCount===this.maxSize||this.bufferBytesSize>=this.bytesLimit},t.prototype.sizeInBytes=function(t){return~-encodeURI(t).split(/%..|./).length},t.prototype.flushPeriodically=function(){var t=this;setTimeout((function(){t.flush(),t.flushPeriodically()}),this.flushTimeout)},t.prototype.flushOnVisibilityHidden=function(){var t=this;navigator.sendBeacon&&(window.addEventListener(g.BEFORE_UNLOAD,V(this.beforeUnloadCallback)),document.addEventListener(g.VISIBILITY_CHANGE,V((function(){"hidden"===document.visibilityState&&t.flush()}))),window.addEventListener(g.BEFORE_UNLOAD,V((function(){return t.flush()}))))},t}();!function(t){t.info="info",t.error="error"}(P||(P={}));var K,U={maxMessagesPerPage:0,sentMessageCount:0};function j(t,e,n){var r=n.value;n.value=function(){var t=U.batch?V(r):r;return t.apply(this,arguments)}}function V(t){return function(){try{return t.apply(this,arguments)}catch(t){W(t);try{B(t)}catch(t){W(t)}}}}function B(t){H(_(_({},function(t){if(t instanceof Error){var e=k(t);return{error:{kind:e.name,stack:ut(e)},message:e.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught "+O(t)}}(t)),{status:P.error}))}function H(t){U.batch&&U.sentMessageCount<U.maxMessagesPerPage&&(U.sentMessageCount+=1,U.batch.add(t))}function z(t){U.debugMode=t}function W(t){U.debugMode&&console.warn("[INTERNAL ERROR]",t)}var q,Y,J=function(){function t(){this.observers=[]}return t.prototype.subscribe=function(t){this.observers.push(t)},t.prototype.notify=function(t){this.observers.forEach((function(e){return e(t)}))},t}();function $(t){return X(t,I(window.location)).href}function X(t,e){if(function(){if(void 0!==q)return q;try{var t=new URL("http://test/path");return q="http://test/path"===t.href}catch(t){q=!1}return q}())return void 0!==e?new URL(t,e):new URL(t);if(void 0===e&&!/:/.test(t))throw new Error("Invalid URL: '"+t+"'");var n=document,r=n.createElement("a");if(void 0!==e){var i=(n=document.implementation.createHTMLDocument("")).createElement("base");i.href=e,n.head.appendChild(i),n.body.appendChild(r)}return r.href=t,r}!function(t){t.FETCH="fetch",t.XHR="xhr"}(Y||(Y={}));var Q,Z,tt,et,nt,rt=1;function it(){var t=rt;return rt+=1,t}function ot(){return Q||(function(t){var e=t[0],n=t[1],r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=V((function(t,e){return this._datadog_xhr={method:t,url:e},r.apply(this,arguments)}));var i=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(t){var r=this,o=performance.now(),a=it();e.notify({requestId:a});var c=!1,s=function(){c||(c=!0,n.notify({requestId:a,startTime:o,duration:performance.now()-o,method:r._datadog_xhr.method,response:r.response,status:r.status,traceId:at(),type:Y.XHR,url:$(r._datadog_xhr.url)}))},u=this.onreadystatechange;return this.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&V(s)(),u&&u.apply(this,arguments)},this.addEventListener("loadend",V(s)),i.apply(this,arguments)}}(Q=[new J,new J]),function(t){var e=t[0],n=t[1];if(!window.fetch)return;var r=window.fetch;window.fetch=V((function(t,i){var o=this,a=i&&i.method||"object"==typeof t&&t.method||"GET",c=performance.now(),s=it();e.notify({requestId:s});var u=function(e){return h(o,void 0,void 0,(function(){var r,i,o,u,l;return p(this,(function(d){switch(d.label){case 0:return r=performance.now()-c,i=$("object"==typeof t&&t.url||t),"stack"in e||e instanceof Error?(o=k(e),n.notify({duration:r,method:a,requestId:s,startTime:c,url:i,response:ut(o),status:0,traceId:at(),type:Y.FETCH}),[3,6]):[3,1];case 1:if(!("status"in e))return[3,6];u=void 0,d.label=2;case 2:return d.trys.push([2,4,,5]),[4,e.clone().text()];case 3:return u=d.sent(),[3,5];case 4:return l=d.sent(),u="Unable to retrieve response: "+l,[3,5];case 5:n.notify({duration:r,method:a,requestId:s,startTime:c,url:i,response:u,responseType:e.type,status:e.status,traceId:at(),type:Y.FETCH}),d.label=6;case 6:return[2]}}))}))},l=r.call(this,t,i);return l.then(V(u),V(u)),l}))}(Q)),Q}function at(){return"ddtrace"in window&&window.ddtrace.tracer.scope().active()?window.ddtrace.tracer.scope().active().context().toTraceId():void 0}function ct(t){if(!tt){var e=new J;if(t.isCollectingError)!function(t,e,n){n.subscribe((function(n){(function(t){return 0===t.status&&"opaque"!==t.responseType}(n)||function(t){return t.status>=500}(n))&&e.notify({context:{error:{origin:Z.NETWORK,stack:lt(n.response,t)||"Failed to load"},http:{method:n.method,status_code:n.status,url:n.url}},message:dt(n.type)+" error "+n.method+" "+n.url,startTime:n.startTime})}))}(t,e,ot()[1]),function(t){et=console.error,console.error=V((function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];et.apply(console,E([e],n)),t.notify({context:{error:{origin:Z.CONSOLE}},message:E(["console error:",e],n).map(st).join(" "),startTime:performance.now()})}))}(e),function(t){nt=function(e,n,r){t.notify(function(t,e){var n,r;void 0!==t.message||e instanceof Error?(n=t.message||"Empty message",r=ut(t)):(n="Uncaught "+O(e),r="No stack, consider using an instance of Error");return{message:n,context:{error:{stack:r,kind:t.name,origin:Z.SOURCE}},startTime:performance.now()}}(e,r))},D.subscribe(nt)}(e);tt=function(t,e){var n=0,r=new J;return e.subscribe((function(e){n<t.maxErrorsByMinute?(n+=1,r.notify(e)):n===t.maxErrorsByMinute&&(n+=1,r.notify({context:{error:{origin:Z.AGENT}},message:"Reached max number of errors by minute: "+t.maxErrorsByMinute,startTime:performance.now()}))})),setInterval((function(){return n=0}),6e4),r}(t,e)}return tt}function st(t){return"string"==typeof t?t:t instanceof Error?ut(k(t)):O(t,0,2)}function ut(t){var e=(t.name||"Error")+": "+t.message;return t.stack.forEach((function(t){var n="?"===t.func?"<anonymous>":t.func,r=t.args&&t.args.length>0?"("+t.args.join(", ")+")":"",i=t.line?":"+t.line:"",o=t.line&&t.column?":"+t.column:"";e+="\n  at "+n+r+" @ "+t.url+i+o})),e}function lt(t,e){return t&&t.length>e.requestErrorResponseLengthLimit?t.substring(0,e.requestErrorResponseLengthLimit)+"...":t}function dt(t){return Y.XHR===t?"XHR":"Fetch"}!function(t){t.AGENT="agent",t.CONSOLE="console",t.NETWORK="network",t.SOURCE="source",t.LOGGER="logger"}(Z||(Z={}));function ft(t,e,n){var r=new Date;r.setTime(r.getTime()+n);var i="expires="+r.toUTCString();document.cookie=t+"="+e+";"+i+";path=/"}function _t(t){var e=document.cookie.match("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)");return e?e.pop():void 0}function ht(){if(void 0===document.cookie||null===document.cookie)return!1;try{return ft("dd_rum_test","test",1e3),"test"===_t("dd_rum_test")}catch(t){return console.error(t),!1}}function pt(t){console.warn("'"+t+"' not yet available, please call '.init()' first.")}function Et(t,e){var n=function(t,e){var n={buildMode:e.buildMode,clientToken:t.clientToken,datacenter:t.datacenter||e.datacenter,env:t.env,proxyHost:t.proxyHost,sdkEnv:e.sdkEnv,sdkVersion:e.sdkVersion,service:t.service,version:t.version},r=Array.isArray(t.enableExperimentalFeatures)?t.enableExperimentalFeatures:[],i=_({isEnabled:function(t){return e=t,-1!==r.indexOf(e);var e},logsEndpoint:C("browser",n),rumEndpoint:C("rum",n),traceEndpoint:C("public-trace",n)},b);return t.internalMonitoringApiKey&&(i.internalMonitoringEndpoint=C("browser",n,"browser-agent-internal-monitoring")),"isCollectingError"in t&&(i.isCollectingError=!!t.isCollectingError),"sampleRate"in t&&(i.sampleRate=t.sampleRate),"resourceSampleRate"in t&&(i.resourceSampleRate=t.resourceSampleRate),"e2e-test"===n.buildMode&&(void 0!==t.internalMonitoringEndpoint&&(i.internalMonitoringEndpoint=t.internalMonitoringEndpoint),void 0!==t.logsEndpoint&&(i.logsEndpoint=t.logsEndpoint),void 0!==t.rumEndpoint&&(i.rumEndpoint=t.rumEndpoint)),i}(t,e),r=function(t){if(t.internalMonitoringEndpoint){var e=new F(new x(t.internalMonitoringEndpoint,t.batchBytesLimit),t.maxBatchSize,t.batchBytesLimit,t.maxMessageSize,t.flushTimeout,(function(){return N()({date:(new Date).getTime(),view:{referrer:document.referrer,url:window.location.href}},void 0!==K?K():{})}));w()(U,{batch:e,maxMessagesPerPage:t.maxInternalMonitoringMessagesPerPage,sentMessageCount:0})}return{setExternalContextProvider:function(t){K=t}}}(n);return{configuration:n,errorObservable:ct(n),internalMonitoring:r}}function gt(){return"file:"!==window.location.protocol||(console.error("Execution is not allowed in the current context."),!1)}function vt(t,e){var n,r,i,o,a,c=(n="_dd_s",o=!1,a=function(){o=!0,window.clearTimeout(r),r=window.setTimeout((function(){o=!1}),1e3)},{get:function(){return o||(i=_t(n),a()),i},set:function(t,e){ft(n,t,e),i=t,a()}});!function(t){var e=t.get(),n=_t("_dd"),r=_t("_dd_r"),i=_t("_dd_l");if(!e){var o={};n&&(o.id=n),i&&/^[01]$/.test(i)&&(o.logs=i),r&&/^[012]$/.test(r)&&(o.rum=r),yt(o,t)}}(c);var s,u,l,d,f,_,h,p,E,v=new J,T=mt(c).id,y=(s=function(){var n=mt(c),r=e(n[t]),i=r.trackingType,o=r.isTracked;n[t]=i,o&&!n.id&&(n.id=m(),n.created=String(Date.now())),yt(n,c),o&&T!==n.id&&(T=n.id,v.notify())},u=1e3,f=!l||void 0===l.leading||l.leading,_=!l||void 0===l.trailing||l.trailing,h=!1,p=!1,E=!1,{throttled:function(){var t=this;E||(h?p=!0:(f?s.apply(this):p=!0,h=!0,d=window.setTimeout((function(){_&&p&&s.apply(t),h=!1,p=!1}),u)))},stop:function(){window.clearTimeout(d),E=!0}}).throttled;return y(),function(t){var e=V(t),n={capture:!0,passive:!0};[g.CLICK,g.TOUCH_START,g.KEY_DOWN,g.SCROLL].forEach((function(t){document.addEventListener(t,e,n),Rt.push((function(){return document.removeEventListener(t,e,n)}))}))}(y),function(t){var e=V((function(){"visible"===document.visibilityState&&t()})),n=window.setInterval(e,6e4);document.addEventListener(g.VISIBILITY_CHANGE,e),Rt.push((function(){clearInterval(n),document.removeEventListener(g.VISIBILITY_CHANGE,e)}))}((function(){yt(mt(c),c)})),{getId:function(){return mt(c).id},getTrackingType:function(){return mt(c)[t]},renewObservable:v}}var Tt=/^([a-z]+)=([a-z0-9-]+)$/;function mt(t){var e=function(t){var e=t.get(),n={};(function(t){return void 0!==t&&(-1!==t.indexOf("&")||Tt.test(t))})(e)&&e.split("&").forEach((function(t){var e=Tt.exec(t);if(null!==e){var r=e[1],i=e[2];n[r]=i}}));return n}(t);return function(t){return(void 0===t.created||Date.now()-Number(t.created)<144e5)&&(void 0===t.expire||Date.now()<Number(t.expire))}(e)?e:(Ot(t),{})}function yt(t,e){if(n=t,0!==Object.keys(n).length){var n;t.expire=String(Date.now()+9e5);var r=function(t){return Object.keys(t).map((function(e){return[e,t[e]]}))}(t).map((function(t){return t[0]+"="+t[1]})).join("&");e.set(r,9e5)}else Ot(e)}function Ot(t){t.set("",0)}var Rt=[];var At,It;(function(){function t(t){var e=this,n=t[0],r=t[1];this.requests=[],this.whenAllCompleteFn=y;var i=0;n.subscribe((function(){i+=1})),r.subscribe((function(t){e.requests.push(t),0===(i-=1)&&setTimeout((function(){e.whenAllCompleteFn(e.requests)}))}))}t.prototype.whenAllComplete=function(t){this.whenAllCompleteFn=t},t.prototype.getStub=function(){var t=this;return function(){var e,n,r=new Promise((function(t,r){e=t,n=r}));return r.resolveWith=function(n){return h(t,void 0,void 0,(function(){var t=this;return p(this,(function(r){return[2,e(_(_({},n),{clone:function(){return{text:function(){return h(t,void 0,void 0,(function(){return p(this,(function(t){if(n.responseTextError)throw n.responseTextError;return[2,n.responseText]}))}))}}}}))]}))}))},r.rejectWith=function(e){return h(t,void 0,void 0,(function(){return p(this,(function(t){return[2,n(e)]}))}))},r}}})(),function(){function t(){}t.prototype.getEntryTypes=function(){return this.instance.entryTypes},t.prototype.fakeEntry=function(t,e){var n=function(){return[t]};this.instance.callback({getEntries:n,getEntriesByName:n,getEntriesByType:function(t){return t===e?n():[]}})},t.prototype.getStub=function(){var t,e=this;return(t=function(){function t(t){this.callback=t,e.instance=this}return t.prototype.observe=function(t){t&&(e.instance.entryTypes=t.entryTypes)},t}()).supportedEntryTypes=["navigation"],t}}();!function(t){t.debug="debug",t.info="info",t.warn="warn",t.error="error"}(It||(It={}));var bt,Ct,St=((At={})[It.debug]=0,At[It.info]=1,At[It.warn]=2,At[It.error]=3,At);Object.keys(It);function wt(t,e,n,r){var i,o={};r.setExternalContextProvider((function(){return N()({session_id:n.getId()},o,Lt())}));var a=new F(new x(e.logsEndpoint,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout,(function(){return N()({date:(new Date).getTime(),session_id:n.getId(),view:{referrer:document.referrer,url:window.location.href}},o,Lt())})),c=((i={})[bt.console]=function(t){return console.log(t.status+": "+t.message)},i[bt.http]=function(t){return a.add(t)},i[bt.silent]=y,i),s=new Nt(n,c);Ct={},t.subscribe((function(t){return s.error(t.message,f({date:(e=t.startTime,Math.floor(A()+e))},t.context));var e}));var u={setLoggerGlobalContext:function(t){o=t},addLoggerGlobalContext:function(t,e){o[t]=e}};return u.createLogger=function(t,e){return function(n,r){return void 0===r&&(r={}),Ct[n]=new Nt(t,e,r.handler,r.level,f(f({},r.context),{logger:{name:n}})),Ct[n]}}(n,c),u.getLogger=Gt,u.logger=s,u}function Gt(t){return Ct[t]}!function(t){t.http="http",t.console="console",t.silent="silent"}(bt||(bt={}));var Nt=function(){function t(t,e,n,r,i){void 0===n&&(n=bt.http),void 0===r&&(r=It.debug),void 0===i&&(i={}),this.session=t,this.handlers=e,this.level=r,this.loggerContext=i,this.handler=this.handlers[n]}return t.prototype.log=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=It.info),this.session.isTracked()&&St[n]>=St[this.level]&&this.handler(f({message:t,status:n},N()({},this.loggerContext,e)))},t.prototype.debug=function(t,e){void 0===e&&(e={}),this.log(t,e,It.debug)},t.prototype.info=function(t,e){void 0===e&&(e={}),this.log(t,e,It.info)},t.prototype.warn=function(t,e){void 0===e&&(e={}),this.log(t,e,It.warn)},t.prototype.error=function(t,e){void 0===e&&(e={});var n={error:{origin:Z.LOGGER}};this.log(t,N()({},n,e),It.error)},t.prototype.setContext=function(t){this.loggerContext=t},t.prototype.addContext=function(t,e){this.loggerContext[t]=e},t.prototype.setHandler=function(t){this.handler=this.handlers[t]},t.prototype.setLevel=function(t){this.level=t},function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);o>3&&a&&Object.defineProperty(e,n,a)}([j],t.prototype,"log",null),t}();function Lt(){var t=window.DD_RUM;return t&&t.getInternalContext?t.getInternalContext():void 0}var Mt,Dt={buildMode:"release",datacenter:"us",sdkEnv:"production",sdkVersion:"1.11.5"};function kt(t,e){if(!e){var n=xt(t)===Mt.TRACKED;return{getId:function(){},isTracked:function(){return n}}}var r=vt("logs",(function(e){return function(t,e){var n=function(t){return t===Mt.NOT_TRACKED||t===Mt.TRACKED}(e)?e:xt(t);return{trackingType:n,isTracked:n===Mt.TRACKED}}(t,e)}));return{getId:r.getId,isTracked:function(){return r.getTrackingType()===Mt.TRACKED}}}function xt(t){return 0!==(e=t.sampleRate)&&100*Math.random()<=e?Mt.TRACKED:Mt.NOT_TRACKED;var e}!function(t){t.NOT_TRACKED="0",t.TRACKED="1"}(Mt||(Mt={}));var Pt,Ft={debug:function(t,e){pt("logs.logger.debug")},error:function(t,e){pt("logs.logger.error")},info:function(t,e){pt("logs.logger.info")},log:function(t,e,n){pt("logs.logger.log")},warn:function(t,e){pt("logs.logger.warn")},setContext:function(t){pt("logs.logger.setContext")},addContext:function(t,e){pt("logs.logger.addContext")},setHandler:function(t){pt("logs.logger.setHandler")},setLevel:function(t){pt("logs.logger.setLevel")}},Kt=(Pt=_({},{logger:Ft,init:function(t){pt("core.init")},addLoggerGlobalContext:function(t,e){pt("addLoggerGlobalContext")},setLoggerGlobalContext:function(t){pt("setLoggerGlobalContext")},createLogger:function(t,e){return pt("createLogger"),Ft},getLogger:function(t){pt("getLogger")}}),Object.defineProperty(Pt,"_setDebug",{get:function(){return z},enumerable:!1}),Pt),Ut=!1;Kt.init=V((function(t){if(gt()&&function(t){if(Ut)return t.silentMultipleInit||console.error("DD_LOGS is already initialized."),!1;if(!t||!t.publicApiKey&&!t.clientToken)return console.error("Client Token is not configured, we will not send any data."),!1;if(void 0!==t.sampleRate&&(e=t.sampleRate,!(function(t){return"number"==typeof t}(e)&&e>=0&&e<=100)))return console.error("Sample Rate should be a number between 0 and 100"),!1;var e;return!0}(t)){t.publicApiKey&&(t.clientToken=t.publicApiKey,console.warn("Public API Key is deprecated. Please use Client Token instead."));var e=!1!==t.forwardErrorsToLogs,n=Et(f(f({},t),{isCollectingError:e}),Dt),r=n.errorObservable,i=n.configuration,o=n.internalMonitoring,a=wt(r,i,kt(i,ht()),o);w()(Kt,a),Ut=!0}})),(function(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var t=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof t&&(t="object"==typeof self?self:"object"==typeof window?window:{}),t}()).DD_LOGS=Kt,Kt.init({clientToken:i.DATADOG_TOKEN,datacenter:"us",forwardErrorsToLogs:!1,sampleRate:50}),Kt.logger.addContext("service","eagle-insight-js"),function(){const t=i.PROTOCOL,e=i.TRACKER_DOMAIN,n=i.TRACKER_EVENT_PATH,r=i.TRACKER_COOKIE_PATH,o=i.TRACK_PARAM_FETCH_PATH;window.eagletag=window.eagletag||{cmd:[]};const c=window.eagletag;c.status=c.status||{layer:void 0,adAccount:"",adAccountMap:{},domain:"",trackingUuid:"",registerCmd:[],timeoutSetUp:!1,timeoutAttempts:0,eagleRunScheduled:!1,fetchTrackParamScheduled:!1,loadStatus:{isLoaded:!1,isLayerSetup:!1,isLayerRun:!1,isThirdCookieRun:!1,isReachLpRun:!1,isFetchTrackParam:!1,isVisitPageRun:!1},existTrackingUuid:void 0,hasSuccessFetchCookie:!1,activeTransactionGroups:[],transactionTimeoutMs:1e4};const s=c.status;if(s.loadStatus.isLoaded)return;const u=function(){s.eagleRunScheduled||(s.eagleRunScheduled=!0,setTimeout((function(){l()?function(){if(s.loadStatus.isReachLpRun||T().catch(t=>{Kt.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"track"})}).finally(()=>{s.loadStatus.isReachLpRun=!0}),s.loadStatus.isVisitPageRun||m().catch(t=>{Kt.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"sendVisitPageEvent"})}).finally(()=>{s.loadStatus.isVisitPageRun=!0}),s.loadStatus.isThirdCookieRun||(v(),s.loadStatus.isThirdCookieRun=!0),s.layer&&!s.loadStatus.isLayerRun){const t=s.layer.findEvent();for(let e=0;e<t.length;e++){const[n,r]=t[e];f(n,r)}s.loadStatus.isLayerRun=!0}const[t,e]=a.GET_TRACKING_FROM_QUERY_PARAM();t||y().catch(t=>{Kt.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"getTrackingParameterFromTrackerServer"})})}():(s.eagleRunScheduled=!1,u())}),100))},l=function(){return eagletag.cmd.every(t=>-1===t.toString().indexOf("setAccountID"))},f=function(t,e){let n,r,i;if("object"==typeof t&&null!==t?(i=t.accountId,n=t.eventType,r=t.eventParams):(n=t,r=e),!n)return;const o=a.CONVERT_TRACK_PARAM_TO_EVENT(n,r,i);p(o).catch(t=>{Kt.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"track"})})},_=function(r){return[t+"://"+e+n,{mode:"cors",method:"POST",cache:"no-cache",headers:{"Content-Type":"text/plain"},redirect:"follow",credentials:"include",body:JSON.stringify(r)}]};let h=!1;const p=async t=>{if(void 0===t||void 0===t.eventType)return;if(!a.IS_OBJECT_PROPERTY_MEMBER_EXISTS(s.adAccountMap))return;if(h)return await new Promise(t=>setTimeout(t,100)),p(t);h=!0;const e=a.GET_TRIGGER_EVENT_ID()||"",n=a.GET_TRACKING_ID()||"",r=a.GET_AUCTION_ID()||"",i=a.GET_AD_ID()||"",o=a.EXISTS_TRACKING_PARAMETERS();o.trackingUuid=s.existTrackingUuid;const c=t.adAccountId?[t.adAccountId]:a.CONVERT_OBJECT_TO_ARRAY(s.adAccountMap),u=!!t.adAccountId,l=O(t.adAccountId),d=[];d.push({eventType:t.eventType,adAccountIds:c,auctionId:r,adId:i,trackingId:n,triggerEventId:e,trackingUuid:s.trackingUuid,purchase:t.purchase,items:t.items,existTracking:o,uniqueTransactionId:l,adTagMigration:u});const[f,E]=_(d);return fetch(f,E).then(()=>{}).catch(t=>{Kt.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"fetch tracking event"})}).finally(()=>{h=!1})};c.writeTrackingID=function(t){void 0!==t&&""!==t&&"/"!==t&&"//"!==t&&(s.domain=t),a.WRITE_TRACKING_UUID(s.domain,s.trackingUuid);const[e,n]=a.GET_TRACKING_FROM_QUERY_PARAM();e&&(a.WRITE_TRACKING_PARAMETERS(s.domain,n),n.tid||a.DELETE_TRACKING_ID(s.domain))},c.setAccountID=function(t){void 0!==t&&""!==t&&(s.adAccountMap[t]=t)},c.setAnalyticsType=function(t){s.loadStatus.isLayerSetup||(t&&"ga4"===t&&(s.layer=new d,s.layer.init(t=>{const[e,n]=s.layer.trackEvent(t);f(e,n)},Kt)),s.loadStatus.isLayerSetup=!0)},c.track=f,c.run=u;const E=function(t){t instanceof Function&&t(),a.IS_OBJECT_PROPERTY_MEMBER_EXISTS(s.adAccountMap)||(s.registerCmd.push(t),!s.timeoutSetUp&&s.timeoutAttempts<5&&(setTimeout(g,1e3),s.timeoutSetUp=!0))},g=function(){for(s.timeoutSetUp=!1,s.timeoutAttempts++;I=s.registerCmd.shift();)c.cmd.push(I)},v=function(){if(!a.IS_OBJECT_PROPERTY_MEMBER_EXISTS(s.adAccountMap))return;const[n,i]=a.GET_TRACKING_FROM_QUERY_PARAM();if(!n)return;const o=new URL(t+"://"+e+r);o.searchParams.set("uuid",s.trackingUuid),o.searchParams.set("tid",i.tid),o.searchParams.set("acids",a.CONVERT_OBJECT_TO_ARRAY(s.adAccountMap).join(",")),o.searchParams.set("aucid",i.auctionId),o.searchParams.set("trid",i.triggerEventId),o.searchParams.set("adid",i.adId);const c=o.toString();a.APPEND_BEACON_IMG_TAG(c)},T=async()=>{const[t,e]=a.GET_TRACKING_FROM_QUERY_PARAM();if(!t){if(!s.hasSuccessFetchCookie)return;e.tid=a.GET_TRACKING_ID(),e.triggerEventId=a.GET_TRIGGER_EVENT_ID(),e.auctionId=a.GET_AUCTION_ID(),e.adId=a.GET_AD_ID()}const n=a.EXISTS_TRACKING_PARAMETERS();n.trackingUuid=s.existTrackingUuid;const r=[];r.push({eventType:"reachLp",adAccountIds:a.CONVERT_OBJECT_TO_ARRAY(s.adAccountMap),auctionId:e.auctionId,adId:e.adId,trackingId:e.tid,triggerEventId:e.triggerEventId,trackingUuid:s.trackingUuid,existTracking:n});const[i,o]=_(r);return fetch(i,o).then(()=>{}).catch(t=>{Kt.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"send reachLp event"})})},m=async()=>{const t=a.CONVERT_OBJECT_TO_ARRAY(s.adAccountMap);if(!a.SHOULD_SEND_VISIT_PAGE_EVENT(t))return;const e=a.GET_TRIGGER_EVENT_ID()||"",n=a.GET_TRACKING_ID()||"",r=a.GET_AUCTION_ID()||"",i=a.GET_AD_ID()||"",o=a.EXISTS_TRACKING_PARAMETERS();o.trackingUuid=s.existTrackingUuid;const c=[];c.push({eventType:"visit_page",adAccountIds:t,auctionId:r,adId:i,trackingId:n,triggerEventId:e,trackingUuid:s.trackingUuid,existTracking:o});const[u,l]=_(c);return fetch(u,l).then(()=>{a.RECORD_VISIT_PAGE_EVENT_SENT(t,s.domain)}).catch(t=>{Kt.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"send visit_page event"})})},y=async()=>{if(s.fetchTrackParamScheduled)return;if(s.fetchTrackParamScheduled=!0,s.loadStatus.isFetchTrackParam)return;const[n,r]=a.GET_TRACKING_FROM_QUERY_PARAM();return n?void 0:fetch(t+"://"+e+o,{method:"GET",headers:{"Content-Type":"text/plain"},redirect:"follow",credentials:"include"}).then(t=>{if(!t.ok)throw new Error(`response.status = ${t.status}, response.statusText = ${t.statusText}`);return t.json()}).then(t=>{const e={tid:t.tid||t.tidf3rd};s.adAccountMap[t.acid]&&(e.triggerEventId=t.trid,e.auctionId=t.aucid,e.adId=t.adid),s.hasSuccessFetchCookie=a.CHECK_AND_WRITE_TRACKING_PARAMETERS(s.domain,e),c.cmd.push((function(){T().catch(t=>{Kt.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"track"})}).finally(()=>{s.loadStatus.isReachLpRun=!0})}))}).catch(t=>{Kt.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"fetch tracking param"})}).finally(()=>{s.loadStatus.isFetchTrackParam=!0,s.fetchTrackParamScheduled=!1})},O=function(t){if(!t)return;for(let e=0;e<s.activeTransactionGroups.length;e++){const n=s.activeTransactionGroups[e];if(!n.usedAccounts.has(t))return n.usedAccounts.add(t),A(n),n.id}const e=R();return e.usedAccounts.add(t),A(e),e.id},R=function(){let t;try{t=crypto.randomUUID()}catch(e){t="txn_"+Date.now()+"_"+Math.random().toString(36).slice(2,11)}const e={id:t,usedAccounts:new Set,timeout:null};return s.activeTransactionGroups.push(e),e},A=function(t){t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(()=>{const e=s.activeTransactionGroups.indexOf(t);e>-1&&s.activeTransactionGroups.splice(e,1)},s.transactionTimeoutMs)};let I;for(!function(){try{s.existTrackingUuid=a.EXISTS_TRACKING_UUID()}catch{}}(),function(){try{s.trackingUuid=a.GET_TRACKING_UUID()||crypto.randomUUID()}catch{}}(),a.EVENTIFY(c.cmd,(function(t){I=t.shift(),E(I)}),Kt);void 0!==(I=c.cmd.shift());)try{E(I)}catch(t){Kt.logger.error(new Error(t).message,{name:new Error(t).name,stack:new Error(t).stack,event:"eagle cmd"})}s.loadStatus.isLoaded=!0}()}]);
//#